"use strict";(self["webpackChunkmaplestory_shop"]=self["webpackChunkmaplestory_shop"]||[]).push([[974],{4974:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});var a=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"container py-5 cart"},[t._m(0),s("div",{staticClass:"row d-flex justify-content-center"},[0!==t.cart.carts.length?s("div",{staticClass:"col-lg-10"},[s("div",{staticClass:"table-responsive-sm"},[s("table",{staticClass:"table mb-0"},[t._m(1),s("tbody",t._l(t.cart.carts,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-maple btn-sm",attrs:{type:"button"},on:{click:function(s){return t.removeCartItem(e.id)}}},[s("i",{staticClass:"far fa-trash-alt"})])]),s("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.product.title)+" "),e.coupon?s("div",{staticClass:"text-success"},[t._v(" 已套用優惠券 ")]):t._e()]),s("td",{staticClass:"align-middle"},[s("div",{staticClass:"input-group"},[s("button",{staticClass:"btn btn-outline-moderate btn-sm d-none d-sm-block mr-2",on:{click:function(s){return t.minusQty(e.id,e.product.id,e.qty)}}},[s("i",{staticClass:"fas fa-minus"})]),s("select",{staticClass:"select-text-center form-control border-moderate",attrs:{id:"qtySelect"},on:{change:function(s){return t.updateQtyBySelect(e.id,e.product.id,s)}}},[s("option",{attrs:{selected:"",disabled:""}},[t._v(" "+t._s(e.qty)+" ")]),t._l(10,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2),s("button",{staticClass:"btn btn-outline-moderate btn-sm d-none d-sm-block ml-2",on:{click:function(s){return t.addQty(e.id,e.product.id,e.qty)}}},[s("i",{staticClass:"fas fa-plus"})])])]),s("td",{staticClass:"align-middle text-right",class:{"text-success":e.coupon}},[t._v(" "+t._s(t._f("currency")(e.final_total))+" ")])])})),0),s("tfoot",[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v(" 總金額 ")]),s("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(t.cart.total))+" ")])]),t.cart.total!==t.cart.final_total?s("tr",[s("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v(" 折扣價 ")]),s("td",{staticClass:"text-right text-success"},[t._v(" "+t._s(t._f("currency")(t.cart.final_total))+" ")])]):t._e()])])]),s("div",{staticClass:"input-group input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(s){s.target.composing||(t.coupon_code=s.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-maple",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v(" 套用優惠碼 ")])])])]):s("div",{staticClass:"col-lg-10"},[s("div",{staticClass:"empty-cart text-center"},[s("p",{staticClass:"mb-1"},[t._v(" 購物車沒有東西哦！快去逛逛吧！ ")]),s("router-link",{staticClass:"text-maple text-decoration-none",attrs:{to:"/category"}},[t._v(" 進入商城 ")])],1)])])]),s("div",{staticClass:"container cart-form pb-5"},[t._m(2),s("div",{staticClass:"row justify-content-center"},[s("ValidationObserver",{staticClass:"col-lg-10",scopedSlots:t._u([{key:"default",fn:function({invalid:e}){return[s("form",{on:{submit:function(s){return s.preventDefault(),t.createOrder.apply(null,arguments)}}},[s("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function({errors:e,classes:a}){return[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"userEmail"}},[s("i",{staticClass:"fas fa-envelope"}),t._v(" Email (*) ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:a,attrs:{id:"userEmail",name:"E-mail",type:"email",placeholder:"請輸入 Email",disabled:t.isDisabled},domProps:{value:t.form.user.email},on:{input:function(s){s.target.composing||t.$set(t.form.user,"email",s.target.value)}}}),s("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])])]}}],null,!0)}),s("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:e,classes:a}){return[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"userName"}},[s("i",{staticClass:"fas fa-user"}),t._v(" 收件人姓名 (*) ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",class:a,attrs:{id:"userName",type:"text",name:"Name",placeholder:"輸入姓名",disabled:t.isDisabled},domProps:{value:t.form.user.name},on:{input:function(s){s.target.composing||t.$set(t.form.user,"name",s.target.value)}}}),s("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])])]}}],null,!0)}),s("ValidationProvider",{staticClass:"form-group",attrs:{rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function({errors:e,classes:a}){return[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"userTel"}},[s("i",{staticClass:"fas fa-phone"}),t._v(" 收件人電話 (*) ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:a,attrs:{id:"userTel",type:"tel",placeholder:"請輸入電話",name:"Telphone",disabled:t.isDisabled},domProps:{value:t.form.user.tel},on:{input:function(s){s.target.composing||t.$set(t.form.user,"tel",s.target.value)}}}),s("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])])]}}],null,!0)}),s("ValidationProvider",{staticClass:"form-group",attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:e,classes:a}){return[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"userAddress"}},[s("i",{staticClass:"fas fa-map-marker-alt"}),t._v(" 收件人地址 (*) ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:a,attrs:{id:"userAddress",type:"text",name:"Address",placeholder:"請輸入地址",disabled:t.isDisabled},domProps:{value:t.form.user.address},on:{input:function(s){s.target.composing||t.$set(t.form.user,"address",s.target.value)}}}),s("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])])]}}],null,!0)}),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"comment"}},[s("i",{staticClass:"fas fa-comment-dots"}),t._v(" 留言 ")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{id:"comment",name:"",cols:"30",rows:"10",disabled:t.isDisabled},domProps:{value:t.form.message},on:{input:function(s){s.target.composing||t.$set(t.form,"message",s.target.value)}}})]),s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-maple btn-lg",attrs:{type:"submit",disabled:t.isDisabled||e}},[t._v(" 送出訂單 ")])])],1)]}}])})],1)])])},r=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"text-center"},[s("h2",{staticClass:"font-weight-bold mb-4 pb-2"},[t._v(" 購物車內容 ")])])},function(){var t=this,s=t._self._c;return s("thead",{staticClass:"thead-light"},[s("th"),s("th",{staticClass:"text-nowrap"},[t._v(" 商品名稱 ")]),s("th",{staticClass:"text-nowrap"},[t._v(" 數量 ")]),s("th",{staticClass:"text-nowrap"},[t._v(" 小計 ")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"text-center"},[s("h2",{staticClass:"font-weight-bold mb-4 pb-2"},[t._v(" 購買資訊 ")])])}],o=e(629),i=e(8513),l={name:"CustomerOrder",data(){return{coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},isDisabled:!0}},computed:{...(0,o.Se)("global",["cart"])},watch:{cart(){const t=this;0!==t.cart.carts.length?t.isDisabled=!1:t.isDisabled=!0}},created(){this.getCart()},methods:{...(0,o.nv)("global",["getCart"]),removeCartItem(t){this.$store.dispatch("global/removeCart",t)},addCouponCode(){this.$store.dispatch("global/addCouponCode",this.coupon_code)},async createOrder(){const t=this,s=t.form,e=await(0,i.Gn)({data:s});e.data.success&&t.$router.push(`/customerCheckout/${e.data.orderId}`),t.$store.dispatch("global/updateLoading",!1)},addQty(t,s,e){const a=Number(e)+1;this.$store.dispatch("global/updateQty",{cid:t,pid:s,newQty:a})},minusQty(t,s,e){const a=Number(e)-1;this.$store.dispatch("global/updateQty",{cid:t,pid:s,newQty:a})},updateQtyBySelect(t,s,e){const a=Number(e.target.value);this.$store.dispatch("global/updateQtyBySelect",{cid:t,pid:s,newQty:a})}}},n=l,c=e(3736),d=(0,c.Z)(n,a,r,!1,null,"1dfba9f1",null),u=d.exports}}]);
//# sourceMappingURL=974.e6379bdc.js.map